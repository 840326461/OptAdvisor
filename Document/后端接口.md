### 后端接口

#### 统一说明:

[用例](https://documenter.getpostman.com/view/5030181/RWTiwexA)

#### 注意事项 

##### 权限

*/message/private/*** : annoymous

*/user/private/*** : annoymous

*/message/*** : user

*/user/*** : user

*/*** : annoymous



条件: 无权限

行为: redirect /auth, 302


##### 使用方法

传入: content-type: application/json

返回: dtype: json

#### User Controller

##### /login

```json
post: {
	"username": "username",
	"password": "password"
},
success: {
    "code": 0,
    "msg": "login success.",
    "data": null
}

```

|code|msg|
|---|---|
|1001|Unknown account|
|1002|Incorrect password|
|1003|Not authenticated|


##### /signUp
```json
post: {
	"username": "username",
	"password": "password",
	"name": "name",
	"birthday": "birthday",
	"telephone": "phoneNumber",
	"email": "email",
	"gender": "gender",
	"avatarPath": "",
	"w1": w1,
	"w2": w2
},
success: {
    "code": 0,
    "msg": "Sign up success",
    "data": null
}
```
|code|msg|
|---|---|
|0|Sign up success|
|1004|Username exists|

##### /sendVerifyCode
```json
post: {
	"username": "username"
},
success: {
    "code": 0,
    "msg": "Send verify code success",
    "data": null
}
```
|code|msg|
|---|---|
|1011|Send verify code fail|
|1012|Send verify code occurs IOException|

##### /checkVerifyCode
```json
post: {
	"verifyCode": "1234"
},
success:
{
    "code": 0,
    "msg": "Check verify code and set new password success",
    "data": null
}
```
| code | msg                                               |
| ---- | ------------------------------------------------- |
|1001|Unknown username|
| 1013 | Never send verify code or verify code has expired|
| 1014 | Wrong verify code|

##### /user/getInfo
```json
post: "",
success: {

    "code": 0,
    "msg": "Get user info success",
    "data": {
        "username": "suun",
        "password": "46835c7ffc8104e90b89d1167b5cd7bd5df78ce202de6418c4b34199b8de5e8b",
        "name": "imagecser",
        "birthday": "2000/7/9",
        "telephone": "17602529171",
        "email": "imagecser@gmail.com",
        "gender": "male",
        "avatarPath": "",
        "w1": 70,
        "w2": 30
    }
}
```
##### /user/logout
```json
post: "",
success: {
    "code": 0,
    "msg": "logout success.",
    "data": null
}
```
##### /user/modifyInfo
```json
post: {
	"username": "suun",
	"password": "suunPassword",
	"name": "suun",
	"birthday": "birthday",
	"telephone": "17602529171",
	"email": "imagecser@gmail.com",
	"w1": 70,
	"w2": 30,
	"gender": "female"
},
success: {
    "code": 0,
    "msg": "Modify info success",
    "data": null
}
```

| code | msg                                     |
| ---- | --------------------------------------- |
| 1007 | Username does not match current session |
| 1001 | Unknown username                        |

##### /user/resetPassword
```json
post: {
	"oldPassword": "suunPassword",
	"newPassword": "suunNewPassword"
},
success: {
    "code": 0,
    "msg": "Update new password success",
    "data": null
}
```

| code | msg                         |
| ---- | --------------------------- |
| 1001 | Unknown username            |
| 1002 | Incorrect password          |
| 1005 | Update new password success |
| 1008 | Need to login first         |

##### /auth

```json
post:""
succss:{
    "code" : 0,
    "msg" : "You are now logged in",
    "data" : null
}
```

| code | msg                 |
| ---- | ------------------- |
| 1008 | Need to login first |



#### MessageController

##### /message/setMessageRead
```json
post: {
	"id": 2
},
success: {
    "code": 0,
    "msg": "Set message read success",
    "data": null
}
```

| code | msg                             |
| ---- | ------------------------------- |
| 4001 | Message does not match the user |

##### /message/getMessage
```json
{
    "code": 0,
    "msg": "Get user's all message success",
    "data": {
        "read": [
            {
                "id": 29,
                "username": "suun",
                "readStatus": true,
                "message": "first message",
                "title": "first title"
            }
        ],
        "unread": [
            {
                "id": 30,
                "username": "suun",
                "readStatus": false,
                "message": "second message",
                "title": "second title"
            }
        ]
    }
}
```

##### /message/getNumberUnreadMessage

```json
post: "",
success: {
    "code": 0,
    "msg": "Get all unread message success",
    "data": 1
}
```

##### /message/deleteMessage

```json
post: {
    "id": 2
},
success: {
    "code": 0,
    "msg": "Delete message success",
    "data": null
}
```

| code | msg                             |
| ---- | ------------------------------- |
| 4001 | Message does not match the user |
| 4002 | Message does not exists         |

#### MessageV2Controller

第二版message API

##### message GET

```json
uri: "/message",
method: "PUT",
response: {
    "code": 0,
    "msg": "Get user's all message success",
    "data": {
        "read": [],
        "unread": [
            {
                "id": 126,
                "username": "suun",
                "readStatus": false,
                "message": "first message",
                "title": "first title",
                "time": "2018/08/13 05:15"
            }
        ]
    }
}
```

##### message/count GET

获得未读数

```json
uri: "/message/count",
method: "GET",
response: {
    "code": 0,
    "msg": "Get number of unread message success",
    "data": 1
}
```

##### message/{id} DELETE

```json
uri: "/message/126",
method: "DELETE",
response: {
    "code": 0,
    "msg": "Delete message success",
    "data": null
}
```

##### message/{id}/read PUT

取反 message.read_status

```json
uri: "/message/126/read",
method: "PUT",
response: {
    "code": 0,
    "msg": "Set message read success",
    "data": null
}
```

##### admin/message POST

```json
uri: "/admin/message",
method: "POST",
data: {
	"username": "suun",
	"message": "first message",
	"title": "first title"
},
response: {
    "code": 0,
    "msg": "Put message success",
    "data": null
}
```

##### 